# tmux ã®å…¨èˆ¬çš„è¨­å®š
###############################

# prefixã‚­ãƒ¼ã‚’ C-t ã«å¤‰æ›´
set-option -g prefix C-t
# C-b ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’è§£é™¤
unbind-key C-b
# C-t t ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã« C-t ã‚’é€ã‚‹
bind-key t send-prefix

# bind-key -r ã«ãŠã‘ã‚‹é€£ç¶šå…¥åŠ›å—ä»˜æ™‚é–“ã‚’ 1,500ms ã«ã™ã‚‹
set-option -g repeat-time 1500

# tmux ã‚’256è‰²ã§è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
set-option -g default-terminal screen-256color
set-option -g terminal-overrides 'xterm:color=256'

# ãƒã‚¦ã‚¹æ“ä½œã‚’æœ‰åŠ¹ã«ã™ã‚‹
set-option -g mouse on
bind-key -n WheelUpPane if-shell -F -t = "#{mouse_any_flag" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒãƒ•ã‚¡ã‚’ã¨ã‚Šã‚ãˆãš100,000è¡Œã«ã™ã‚‹
set-option -g history-limit 100000

# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯2ç§’é–“è¡¨ç¤ºã™ã‚‹
set-option -g display-time 2000

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ãŸã¨ãã«ç•ªå·ã‚’è©°ã‚ã‚‹
set-option -g renumber-windows on

# ãƒšã‚¤ãƒ³ã‚’é–‰ã˜ãŸã¨ãã«æ®‹ã™
#set-window-option -g remain-on-exit off

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒã‚ã£ãŸã¨ãã« # ã‚’ä»˜ã‘ã‚‹
set-window-option -g monitor-activity on
# ãƒ™ãƒ«ãŒé³´ã£ãŸã¨ãã« ! ã‚’ä»˜ã‘ã‚‹
set-window-option -g monitor-bell on
# 30ç§’é–“å‹•ããŒãªã„ã¨ãã« ~ ã‚’ä»˜ã‘ã‚‹
set-window-option -g monitor-silence 30

# ã‚·ã‚§ãƒ«å‘¨ã‚Šã®è¨­å®š
##############################

# tmux èµ·å‹•æ™‚ã®ã‚·ã‚§ãƒ«ã‚’zshã«ã™ã‚‹
set-option -g default-shell /usr/bin/zsh


# ãƒ—ãƒ¬ãƒ•ã‚£ã‚¯ã‚¹ã‚­ãƒ¼ã¨ã®ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®è¨­å®š
##############################

# ãƒ—ãƒ¬ãƒ•ã‚£ã‚¯ã‚¹ã‚­ãƒ¼ã‚’é€£æ‰“ã™ã‚‹ã¨ç›´å‰ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¸ç§»å‹•
bind-key C-t last-window

# æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ C-t C-c ã§é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
bind-key C-c new-window

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åˆ†å‰²ã®è¨­å®š
bind-key S split-window # ç¸¦åˆ†å‰²
bind-key V split-window -h # æ¨ªåˆ†å‰²

# åˆ†å‰²ã—ãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ã‚µã‚¤ã‚ºã‚’æƒãˆã‚‹
bind-key = select-layout -E
# ã‚‚ã¨ã‚‚ã¨ = ã‚­ãƒ¼ã«å¯¾å¿œã™ã‚‹ãƒãƒƒãƒ•ã‚¡ä¸€è¦§ã‚³ãƒãƒ³ãƒ‰ã¯ b ã¸
bind-key b choose-buffer -Z

# E ã§åŒæœŸãƒšã‚¤ãƒ³ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹
bind-key E if-shell -F '#{pane_synchronized}'\
    'set-window-option synchronize-panes off  ; display-message "Stopped Synchronizing."' \
    'set-window-option synchronize-panes on   ; display-message "Started Synchronizing."' \

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å‰å¾Œç§»å‹•
bind-key -r C-n next-window \; display-message 'Type a following command...'
bind-key -r C-p previous-window

# ãƒšã‚¤ãƒ³é–“ã®ç§»å‹•ã‚’ C-t [hjkl] ã§ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
# Control ã¨ã®åŒæ™‚æŠ¼ã—ã§ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã‚’æŠœã‘ãªã„
#bind-key -r C-h select-pane -L ãŒãªãœã‹tmuã§ã¯C-hã®ã‚­ãƒ¼ã‚³ãƒ¼ãƒ‰ãŒ ^? ã«åŒ–ã‘ã‚‹ã®ã§ã€ãã‚Œã«å¯¾å¿œã™ã‚‹
bind-key -r BSpace select-pane -L \; display-message 'Type a following command...'
bind-key -r C-j select-pane -D \; display-message 'Type a following command...'
bind-key -r C-k select-pane -U \; display-message 'Type a following command...'
bind-key -r C-l select-pane -R \; display-message 'Type a following command...'

# ãƒšã‚¤ãƒ³ãƒªã‚µã‚¤ã‚ºãƒ¢ãƒ¼ãƒ‰ã®å®šç¾©
bind-key -r -T my-pane-resize j resize-pane -D
bind-key -r -T my-pane-resize h resize-pane -L
bind-key -r -T my-pane-resize l resize-pane -R
bind-key -r -T my-pane-resize k resize-pane -U
bind-key r switch-client -T my-pane-resize \; display-message 'Resize the pane [hjkl]'

# ãƒ­ã‚°å–ã‚Šã®è¨­å®š
my_log_filename='~/.tmux/log/#{host_short}.%Y-%m-%dT%H-%M-%S.log'
bind-key L if-shell -F '#{pane_pipe}' \
    'pipe-pane ; display-message "Stopped logging."' \
    'pipe-pane "cat_timestamp > $my_log_filename" ; display-message "Started logging to $my_log_filename."'



# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã«ãŠã‘ã‚‹ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰è¨­å®š
##############################

# vim ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ã†
set-window-option -g mode-keys vi
# v ã§é¸æŠã‚’å§‹ã‚ã‚‹
bind-key -T copy-mode-vi v send -X begin-selection
# V ã§è¡Œé¸æŠ
bind-key -T copy-mode-vi V send -X select-line
# C-v ã§çŸ©å½¢é¸æŠ
bind-key -T copy-mode-vi C-v send -X rectangle-toggle
# y ã§ãƒ¤ãƒ³ã‚¯
bind-key -T copy-mode-vi y send -X copy-selection
# Y ã§è¡Œãƒ¤ãƒ³ã‚¯
bind-key -T copy-mode-vi Y send -X copy-line



# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®è¨­å®š
##############################

# æ›´æ–°é–“éš”ã‚’1ç§’ã«ã™ã‚‹(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ15ç§’)
set-option -g status-interval 1
# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚¹ãƒˆã¯å·¦å¯„ã›
set-option -g status-justify left
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼å…¨èˆ¬ã®è‰²
set-option -g status-style 'bg=black,fg=white'

# å·¦å´
set-option -g status-left-length 128
set-option -g status-left-style fg=yellow
set-option -g status-left '#{host_short} #{session_id}#{window_id}#{pane_id}#{?session_many_attached,&,} '

# ä¸­å¤®(ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚¹ãƒˆ)
my_window_flag='#{?window_active,ğŸŒ…,}#{?window_last_flag,ğŸŒ„,}#{?pane_synchronized,ğŸ¶,}#{?window_activity_flag,ğŸŒ,}#{?window_bell_flag,ğŸ””,}#{?window_silence_flag,ğŸ’¤,}#{?window_zoomed_flag,ğŸ”,}'
# ã‚«ãƒ¬ãƒ³ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®è¨­å®š
set-window-option -g window-status-current-style bg=blue,fg=white
set-window-option -g window-status-current-format "#I:#W[#{window_panes}]${my_window_flag}"
# ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒã‚ã£ãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®è¨­å®š
set-window-option -g window-status-activity-style ''
# ãƒ™ãƒ«ãŒé³´ã£ãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®è¨­å®š
set-window-option -g window-status-bell-style blink
# ãã®ä»–ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®è¨­å®š
set-window-option -g window-status-style 'bg=#404040,fg=white'
set-window-option -g window-status-format "#I:#W[#{window_panes}]${my_window_flag}"

# å³å´
set-option -g status-right-length 128
set-option -g status-right-style fg=yellow
set-option -g status-right '(#(get_tmux_loadavg)) %Y/%m/%d %H:%M:%S'



# ãƒšã‚¤ãƒ³ã®è¨­å®š
##############################

# å„ãƒšã‚¤ãƒ³ã®æœ€ä¸‹è¡Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¡¨ç¤º
set-window-option -g pane-border-status bottom
# ãƒšã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å†…å®¹
set-window-option -g pane-border-format "#{?pane_active,#[reverse],#[bg=#404040,fg=white]}#{pane_index}#{?pane_synchronized,ğŸ¶,}#{?pane_pipe,ğŸ“ƒ,}: #{pane_title}#[default]"
# ãƒšã‚¤ãƒ³å¢ƒç•Œç·šã®ã‚¹ã‚¿ã‚¤ãƒ«(ã‚¢ã‚¯ãƒ†ã‚£ãƒ–)
set-window-option -g pane-active-border-style 'bg=black,fg=green'
# ãƒšã‚¤ãƒ³å¢ƒç•Œç·šã®ã‚¹ã‚¿ã‚¤ãƒ«(ãã®ä»–)
set-window-option -g pane-border-style 'bg=black,fg=#404040'



# ãã®ä»–ã‚ªãƒªã‚¸ãƒŠãƒ«æ©Ÿèƒ½
# C-t H ã§ãƒãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼ã—ãŸã„
