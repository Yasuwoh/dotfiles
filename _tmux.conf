# tmux の全般的設定
###############################

# prefixキーを C-t に変更
set-option -g prefix C-t
# C-b のキーバインドを解除
unbind-key C-b
# C-t t でウィンドウに C-t を送る
bind-key t send-prefix

# bind-key -r における連続入力受付時間を 1,500ms にする
set-option -g repeat-time 1500

# tmux を256色で表示できるようにする
set-option -g default-terminal screen-256color
set-option -g terminal-overrides 'xterm:color=256'

# マウス操作を有効にする
set-option -g mouse on
bind-key -n WheelUpPane if-shell -F -t = "#{mouse_any_flag" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# スクロールバッファをとりあえず10,000行にする
set-option -g history-limit 10000

# ウィンドウを閉じたときに番号を詰める
set-option -g renumber-windows on


# シェル周りの設定
##############################

# tmux 起動時のシェルをzshにする
set-option -g default-shell /usr/bin/zsh


# プレフィクスキーとのコンビネーションキーバインドの設定
##############################

# プレフィクスキーを連打すると直前のウィンドウへ移動
bind-key C-t last-window

# 新しいウィンドウを C-t C-c で開けるようにする
bind-key C-c new-window

# ウィンドウ分割の設定
bind-key S split-window # 縦分割
bind-key V split-window -h # 横分割

# ウィンドウの前後移動
bind-key -r C-n next-window
bind-key -r C-p previous-window

# ペイン間の移動を C-t [hjkl] でできるようにする
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
# Control との同時押しではコマンドモードを抜けない
bind-key -r C-h select-pane -L
bind-key -r C-j select-pane -D
bind-key -r C-k select-pane -U
bind-key -r C-l select-pane -R

# C-t a で monitor-activity C-t s で monitor-silence とする
bind-key a set-window-option monitor-activity
bind-key s set-window-option monitor-silence 30



# コピーモードにおけるキーバインド設定
##############################

# vim キーバインドを使う
set-window-option -g mode-keys vi
# v で選択を始める
bind-key -T copy-mode-vi v send -X begin-selection
# V で行選択
bind-key -T copy-mode-vi V send -X select-line
# C-v で矩形選択
bind-key -T copy-mode-vi C-v send -X rectangle-toggle
# y でヤンク
bind-key -T copy-mode-vi y send -X copy-selection
# Y で行ヤンク
bind-key -T copy-mode-vi Y send -X copy-line



# ステータスバーの設定
##############################

# 更新間隔を1秒にする(デフォルト15秒)
set-option -g status-interval 1
# ウィンドウリストは中央揃え
set-option -g status-justify centre
# ステータスバー全般の色
set-option -g status-style bg=green,fg=black
# アクティブなウィンドウの色を変える
set-option -g window-status-current-style bg=blue,fg=black

# 左側
set-option -g status-left-length 64
set-option -g status-left '#{host_short}[#{session_name}]'
#set-option -g status-left-style

# 右側
set-option -g status-right 64
set-option -g status-right '%Y-%m-%d %H:%M:%S'
